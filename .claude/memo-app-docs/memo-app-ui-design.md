# メモアプリ UI/UX設計書 v2.0

## 1. 設計概要

### 1.1 デザインコンセプト
- **LINE風チャットUI**: 親しみやすいメッセージング体験
- **紫系統のモダンデザイン**: 青紫〜純パープルのグラデーション
- **没入感**: フルスクリーンモーダルで録音に集中
- **達成感**: トロフィー風通知でユーザー体験向上
- **自分との対話**: アイデアを整理し記録する個人的な空間

### 1.2 デザイン原則（論理的UI設計）
- **ユーザー最優先**: メモを取る人にとって最も使いやすいインターフェース
- **3色ルール遵守**: ベース（70%）・メイン（25%）・アクセント（5%）の配色
- **情報階層の明確化**: 重要度に応じた視覚的優先順位
- **完全な一貫性**: 全要素で統一されたデザインパターン
- **戦略的余白活用**: 視覚的グループ化と誘導

### 1.3 技術基盤
- **React 19 + TypeScript**: コンポーネントベース設計
- **Tailwind CSS + CSS Modules**: Material-UI非依存のカスタムコンポーネント
- **Framer Motion**: スムーズなアニメーション
- **レスポンシブデザイン**: モバイルファースト設計
- **PWA対応**: ネイティブアプリ風の体験

## 2. カラーパレット（3色ルール適用）

### ベースカラー（70%使用）
```css
--base-primary: #FFFFFF;        /* メイン背景 */
--base-secondary: #F9FAFB;      /* セカンダリ背景 */
--base-tertiary: #F3F4F6;       /* カード・入力エリア背景 */
--base-border: #E5E7EB;         /* ボーダー・区切り線 */
```

### メインカラー（25%使用）- 紫系グラデーション
```css
--main-primary: #7C3AED;        /* メインパープル */
--main-secondary: #6366F1;      /* 青紫（グラデーション用） */
--main-light: #C4B5FD;          /* 薄紫（自分のメッセージバブル） */
--main-dark: #5B21B6;           /* 濃紫（アクティブ状態） */
```

### アクセントカラー（5%使用）
```css
--accent-primary: #EC4899;      /* ピンク紫（重要なアクション） */
--accent-secondary: #F59E0B;    /* アンバー（警告・注意） */
--accent-success: #10B981;      /* エメラルド（成功・完了） */
--accent-error: #EF4444;        /* レッド（エラー・削除） */
```

### ダークモード
```css
--dark-base-primary: #1F2937;
--dark-base-secondary: #111827;
--dark-base-tertiary: #374151;
--dark-base-border: #4B5563;
```

## 3. 画面構成・レイアウト

### 3.1 全体レイアウト（LINE風）
```
┌─────────────────────────────┐
│        Header Bar           │ ← 固定ヘッダー（60px）
├─────────────────────────────┤
│                             │
│      Message Timeline       │ ← メインコンテンツエリア
│     (Infinite Scroll)       │   （可変高さ）
│                             │
├─────────────────────────────┤
│     Input Area (Fixed)      │ ← 固定入力エリア（80px）
└─────────────────────────────┘
```

### 3.2 画面一覧
| 画面名 | 説明 | 主要機能 |
|--------|------|----------|
| メインタイムライン | LINE風メッセージ表示 | 閲覧、再生、検索 |
| 録音モーダル | 音声録音（フルスクリーン） | 録音、停止、完了 |
| 文字起こしモーダル | 処理中表示 | グラデーションローディング |
| ログイン画面 | 認証 | メール/Google認証 |
| 設定画面 | アプリ設定 | テーマ切替、リトライ設定 |

### 3.3 画面遷移
```
[ログイン画面]
      ↓
[メインタイムライン]
      ↓ 🎤ボタン
[録音モーダル]
      ↓ 録音完了
[文字起こしモーダル]
      ↓ 処理完了
[メインタイムライン] (新規メモ追加)
```

## 4. メッセージバブル仕様

### 4.1 自分のメッセージ（右寄せ）
```css
.message-bubble.own {
  align-self: flex-end;
  background: linear-gradient(135deg, #7C3AED, #6366F1);
  color: white;
  border-radius: 18px 18px 4px 18px;
  max-width: 70%;
  padding: 12px 16px;
  box-shadow: 0 2px 8px rgba(124, 58, 237, 0.25);
}
```

### 4.2 他人のメッセージ（左寄せ）※将来機能
```css
.message-bubble.others {
  align-self: flex-start;
  background: #FFFFFF;
  color: #374151;
  border-radius: 18px 18px 18px 4px;
  border: 1px solid #E5E7EB;
  max-width: 70%;
  padding: 12px 16px;
}
```

### 4.3 システムメッセージ（文字起こし結果等）
```css
.message-bubble.system {
  align-self: flex-start;
  background: #F3F4F6;
  color: #374151;
  border-radius: 18px 18px 18px 4px;
  max-width: 70%;
  padding: 12px 16px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}
```

### 4.4 音声メッセージ
- **アイコン**: 🎤（メッセージ内左端）
- **波形表示**: 簡略化されたオーディオ波形
- **再生時間**: 右下に表示（例："0:30"）
- **再生ボタン**: ▶️/⏸️ トグル

## 5. 詳細画面設計

### 5.1 メインタイムライン画面

#### レイアウト構成
```
┌─────────────────────────────────┐
│ 📝 VoiceMemo          🔍 🌙 ⚙️  │ ← ヘッダー
├─────────────────────────────────┤
│                                 │
│  ── Today ──                    │ ← 日付区切り
│                                 │
│              ┌─────────────┐    │
│              │ こんにちは！ │    │ ← 自分のメモ（右寄せ）
│              │ 会議の内容を │    │    紫グラデーション
│              │ メモします   │    │
│              └─────────────┘    │
│                     14:30       │
│                                 │
│ ┌─────────────────┐             │
│ │ 📄 文字起こし   │             │ ← システムメッセージ
│ │ 完了しました    │             │    （左寄せ・グレー）
│ └─────────────────┘             │
│        14:31                    │
│                                 │
│              ┌─────────────┐    │
│              │ 🎤 0:30     │    │ ← 音声メモ（右寄せ）
│              │ ━━━━━━━━   │    │
│              │    ▶️       │    │
│              └─────────────┘    │
│                     14:32       │
│                                 │
├─────────────────────────────────┤
│ 📝 メッセージを入力... 🎤 📤     │ ← 入力エリア
└─────────────────────────────────┘
```

#### デザイン仕様

**ヘッダー**:
- **高さ**: 60px（モバイル）/ 64px（デスクトップ）
- **背景**: rgba(255,255,255,0.95) + backdrop-blur
- **タイトル**: 18px, Bold, #111827
- **アイコン**: 24px（検索、ダークモード切替、設定）

**メッセージエリア**:
- **背景**: #F9FAFB
- **パディング**: 16px（モバイル）/ 24px（デスクトップ）
- **メッセージ間隔**: 8px（同時間帯）/ 16px（時間差大）
- **日付区切り**: 中央配置、薄いグレーテキスト

**入力エリア**:
- **高さ**: 最小80px、最大200px（自動拡張）
- **背景**: #FFFFFF + 上部シャドウ
- **入力フィールド**: 
  - 背景: #F9FAFB
  - ボーダー: 1px solid #E5E7EB
  - 角丸: 20px
  - フォーカス時: 紫ボーダー + シャドウ

### 5.2 録音モーダル

#### レイアウト
```
┌─────────────────────────────────┐
│                                 │
│         音声録音中              │
│                                 │
│      ◐ ◐ ◐ ◐ ◐ ◐ ◐          │ ← 波形アニメーション
│                                 │
│         00:15 / 01:00           │ ← 経過時間/最大時間
│                                 │
│     [■ 停止]    [✓ 完了]       │ ← アクションボタン
│                                 │
└─────────────────────────────────┘
```

#### デザイン仕様
- **背景**: 半透明オーバーレイ + 白モーダル
- **波形**: 紫グラデーションのパルスアニメーション
- **ボタン**: 
  - 停止: グレー背景
  - 完了: 紫グラデーション背景

### 5.3 文字起こしモーダル

#### レイアウト
```
┌─────────────────────────────────┐
│                                 │
│      文字起こし処理中...        │
│                                 │
│    ████████████░░░░░░░         │ ← プログレスバー
│                                 │
│    音声を解析しています         │
│                                 │
└─────────────────────────────────┘
```

#### アニメーション
```css
@keyframes gradient-loading {
  0% { background-position: -200px 0; }
  100% { background-position: calc(200px + 100%) 0; }
}

.transcribing {
  background: linear-gradient(90deg, #F3F4F6, #C4B5FD, #F3F4F6);
  background-size: 200px 100%;
  animation: gradient-loading 1.5s ease-in-out infinite;
}
```

## 6. アニメーション・インタラクション

### 6.1 メッセージ送信
1. **入力エリアから上昇**: translateY(40px) → translateY(0)
2. **透明度変化**: opacity: 0 → opacity: 1
3. **バウンス効果**: scale(0.95) → scale(1.02) → scale(1)
4. **継続時間**: 300ms, ease-out

### 6.2 音声録音中
```css
@keyframes pulse-recording {
  0%, 100% { 
    transform: scale(1); 
    box-shadow: 0 0 0 0 rgba(236, 72, 153, 0.7); 
  }
  50% { 
    transform: scale(1.05); 
    box-shadow: 0 0 0 10px rgba(236, 72, 153, 0); 
  }
}
```

### 6.3 通知（トロフィー風）
```css
@keyframes trophy-slide {
  0% { transform: translateX(100%); }
  10% { transform: translateX(0); }
  90% { transform: translateX(0); opacity: 1; }
  100% { transform: translateX(100%); opacity: 0; }
}

.trophy-notification {
  animation: trophy-slide 3s ease-in-out;
  background: linear-gradient(135deg, #7C3AED, #EC4899);
  border-radius: 12px;
  padding: 16px;
  color: white;
  box-shadow: 0 4px 20px rgba(124, 58, 237, 0.4);
}
```

## 7. レスポンシブデザイン

### ブレークポイント
```css
/* モバイル (〜640px) */
@media (max-width: 640px) {
  .message-bubble { max-width: 85%; }
  .header-bar { height: 56px; }
  .input-area { padding: 12px; }
}

/* タブレット (641px〜1024px) */
@media (min-width: 641px) and (max-width: 1024px) {
  .message-bubble { max-width: 75%; }
  .container { max-width: 768px; }
}

/* デスクトップ (1025px〜) */
@media (min-width: 1025px) {
  .container { max-width: 800px; margin: 0 auto; }
  .message-bubble { max-width: 70%; }
}
```

### モバイル最適化
- **タッチターゲット**: 最小 44px × 44px
- **スワイプジェスチャー**: 
  - 左スワイプ: メッセージアクション（編集・削除）
  - 右スワイプ: 返信（将来機能）
- **長押し**: メッセージのコピー・共有メニュー

## 8. アクセシビリティ（WCAG 2.1 AA準拠）

### キーボードナビゲーション
- **Tab順序**: 検索 → メッセージ → 入力 → 音声 → 送信
- **Enterキー**: 送信（Shift+Enterで改行）
- **Escapeキー**: 録音中止、モーダル閉じる

### スクリーンリーダー対応
```html
<!-- 音声メッセージの例 -->
<div role="article" aria-label="音声メッセージ、30秒、午後2時15分">
  <button aria-label="音声を再生" aria-pressed="false">
    🎤
  </button>
  <span class="sr-only">30秒</span>
</div>

<!-- テキストメッセージの例 -->
<div role="article" aria-label="テキストメッセージ、午後2時15分">
  <p>メッセージ内容がここに入ります</p>
</div>
```

### 色彩・コントラスト
- **最小コントラスト比**: 4.5:1（通常テキスト）
- **大きなテキスト**: 3:1（18px以上）
- **色に依存しない情報伝達**: アイコン・形状も併用

## 9. コンポーネント構成

### 基本UIコンポーネント
```
src/components/ui/
├── Button.tsx          # カスタムボタン
├── Card.tsx           # カードコンポーネント
├── Input.tsx          # 入力フィールド
├── Message.tsx        # メッセージバブル
└── Modal.tsx          # モーダルベース
```

### メモ機能コンポーネント
```
src/components/memo/
├── MemoTimeline.tsx   # LINE風タイムライン
├── MemoMessage.tsx    # メモメッセージ
├── AudioMessage.tsx   # 音声メッセージ
├── TextMessage.tsx    # テキストメッセージ
└── InputArea.tsx      # 入力エリア
```

### レイアウトコンポーネント
```
src/components/layout/
├── Header.tsx         # ヘッダーバー
├── Timeline.tsx       # タイムラインコンテナ
└── FloatingButton.tsx # フローティングアクションボタン
```

## 10. パフォーマンス最適化

### 最適化方針
- **仮想スクロール**: 大量メッセージの効率的レンダリング
- **画像遅延読み込み**: 添付画像のlazy loading
- **音声ファイル最適化**: WebM形式、適切なビットレート
- **メモリ管理**: 不要な音声データの自動削除

### バンドルサイズ削減
- **Material-UI削除**: カスタムコンポーネントで代替
- **アイコン最適化**: 使用するもののみバンドル
- **CSS-in-JS回避**: Tailwind + CSS Modulesで軽量化

## 11. 実装優先順位

### Phase 1: 基盤構築 ✅
1. カラーパレット・テーマ定義
2. 基本レイアウトコンポーネント
3. メッセージバブルコンポーネント
4. 入力エリアコンポーネント

### Phase 2: 機能実装 🔄
1. メッセージ送信・表示ロジック
2. 音声録音・再生機能
3. タイムライン無限スクロール
4. レスポンシブ対応

### Phase 3: 高度な機能 ⏳
1. アニメーション・マイクロインタラクション
2. アクセシビリティ完全対応
3. パフォーマンス最適化
4. ダークモード切替機能

---

## 改版履歴
- v2.0 (2024-08-10): LINE風紫系UIへ全面刷新、Material-UI削除
- v1.0 (2024-08-04): 初版作成