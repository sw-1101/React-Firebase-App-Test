# メモアプリ UI/UX設計書

## 1. 設計概要

### 1.1 デザインコンセプト
- **親しみやすさ**: LINE風タイムラインで直感的な操作
- **没入感**: フルスクリーンモーダルで録音に集中
- **達成感**: PSトロフィー風通知でユーザー体験向上
- **シンプル**: 余計な設定や選択肢を排除

### 1.2 デザイン原則
- **モバイルファースト**: スマートフォン利用を最優先
- **ワンタップ操作**: 最小限のタップで目的達成
- **視覚的フィードバック**: 操作に対する明確な反応
- **アクセシビリティ**: 誰でも使いやすいインターフェース

### 1.3 技術基盤
- **React + TypeScript**: コンポーネントベース設計
- **Material-UI + Tailwind CSS**: 一貫したデザインシステム
- **レスポンシブデザイン**: 全デバイス対応
- **PWA対応**: ネイティブアプリ風の体験

## 2. 画面構成・画面遷移

### 2.1 画面一覧
| 画面名 | 説明 | 主要機能 |
|--------|------|----------|
| メインタイムライン | メモ一覧表示 | 閲覧、再生、検索 |
| 録音モーダル | 音声録音 | 録音、停止、完了 |
| 文字起こしモーダル | 処理中表示 | 進捗表示 |
| ログイン画面 | 認証 | メール/Google認証 |
| 設定画面 | アプリ設定 | リトライ回数等 |

### 2.2 画面遷移図
```
[ログイン画面]
      ↓
[メインタイムライン]
      ↓ 🎤ボタン
[録音モーダル]
      ↓ 録音完了
[文字起こしモーダル]
      ↓ 処理完了
[メインタイムライン] (新規メモ追加)
```

### 2.3 ナビゲーション設計
- **下部固定**: 入力エリア + 🎤ボタン
- **フローティングボタン**: 右下録音ボタン（案として）
- **ヘッダー**: 検索、設定アクセス
- **モーダル**: 全画面オーバーレイ

## 3. 詳細画面設計

### 3.1 メインタイムライン画面

#### 3.1.1 レイアウト構成
```
┌─────────────────────────────────┐
│ ← VoiceMemo           🔍 ⚙️     │ ← ヘッダー（44px）
├─────────────────────────────────┤
│                                 │
│ ┌─ Today ───────────────────┐   │ ← 日付セクション
│ │ 💭 アイデアメモ      10:30 │   │
│ │ "新しいプロジェクトの..."  │   │ ← メモカード
│ │          ▶️ [0:30] 🎵     │   │
│ └───────────────────────────┘   │
│                                 │
│ ┌───────────────────────────┐   │
│ │ 📝 会議録音         09:15  │   │
│ │ "チーム定例会議の..."      │   │ ← メモカード
│ │          ▶️ [1:00] 🎤     │   │
│ └───────────────────────────┘   │
│                                 │
│ ┌─ Yesterday ───────────────┐   │
│ │ 🛒 買い物メモ       18:45  │   │
│ │ "牛乳、パン、卵..."       │   │
│ │          ▶️ [0:15] 📝     │   │
│ └───────────────────────────┘   │
│                                 │
├─────────────────────────────────┤
│ [📝 テキスト入力] [🎤] [送信]    │ ← 入力エリア（60px）
└─────────────────────────────────┘
```

#### 3.1.2 デザイン仕様

**ヘッダー**:
- **高さ**: 44px（iOS標準）
- **背景色**: 白 (#FFFFFF)
- **タイトル**: "VoiceMemo" - 18px, Bold
- **アイコン**: 🔍(検索), ⚙️(設定) - 24px

**日付セクション**:
- **背景色**: 薄いグレー (#F5F5F5)
- **テキスト**: 16px, Medium, グレー (#666666)
- **パディング**: 上下8px, 左右16px
- **表示形式**: "Today", "Yesterday", "1月15日"

**メモカード**:
- **背景色**: 白 (#FFFFFF)
- **影**: Box Shadow 0 1px 3px rgba(0,0,0,0.1)
- **角丸**: 8px
- **パディング**: 16px
- **マージン**: 上下4px, 左右8px

**メモカード内容**:
- **アイコン + タイトル**: 14px, Medium
- **時刻**: 12px, Light, 右寄せ
- **本文プレビュー**: 14px, Regular, 3行まで表示
- **再生ボタン**: 32px, 丸型, プライマリカラー
- **時間表示**: チップ形式, 12px

**入力エリア**:
- **高さ**: 60px
- **背景色**: 白 (#FFFFFF)
- **境界線**: 上部に薄いグレーライン
- **レイアウト**: テキスト入力 + 🎤ボタン + 送信ボタン

#### 3.1.3 インタラクション設計

**スクロール**:
- **無限スクロール**: 50件ずつ追加読み込み
- **スクロール位置記憶**: 画面復帰時の位置保持
- **Pull to Refresh**: 上引きで最新データ取得

**タップ操作**:
- **メモカード**: 詳細表示（将来機能）
- **再生ボタン**: 音声再生開始/停止
- **🎤ボタン**: 録音モーダル表示

**ロング操作**:
- **メモカード長押し**: 削除確認モーダル

### 3.2 録音モーダル画面

#### 3.2.1 レイアウト構成
```
┌─────────────────────────────────┐
│█████████████████████████████████│ ← 暗いオーバーレイ
│█                               █│
│█         🔴 録音中             █│ ← ステータステキスト
│█                               █│
│█   ░░██░░░░██░░██░░░░███      █│ ← 波形アニメーション
│█   ████░░██░░░░██████░░░      █│
│█                               █│
│█        00:25 / 01:00          █│ ← 時間表示
│█                               █│
│█                               █│
│█   ⏸️ 停止     ✅ 完了        █│ ← アクションボタン
│█                               █│
│█████████████████████████████████│
└─────────────────────────────────┘
```

#### 3.2.2 デザイン仕様

**オーバーレイ**:
- **背景色**: 半透明黒 rgba(0,0,0,0.9)
- **全画面表示**: フルスクリーンモーダル
- **アニメーション**: フェードイン/アウト 300ms

**ステータステキスト**:
- **テキスト**: "🔴 録音中" - 24px, Bold, 白色
- **位置**: 上部中央
- **アニメーション**: パルス効果

**波形アニメーション**:
- **サイズ**: 幅80%, 高さ120px
- **色**: 白色 (#FFFFFF)
- **更新**: リアルタイム音声レベル反映
- **パターン**: バー形式、左から右へ流れる

**時間表示**:
- **形式**: "00:25 / 01:00" - 36px, Bold, 白色
- **位置**: 中央
- **更新**: 1秒間隔

**アクションボタン**:
- **サイズ**: 80px × 80px, 丸型
- **停止ボタン**: 赤色背景, ⏸️アイコン
- **完了ボタン**: 緑色背景, ✅アイコン
- **配置**: 下部、左右に配置

#### 3.2.3 インタラクション設計

**録音開始**:
1. モーダルフェードイン
2. マイク権限確認
3. 録音開始 + 波形表示開始

**録音中**:
- **波形**: リアルタイム更新
- **時間**: 1秒ごと更新
- **プログレスバー**: 1分に向けて進行

**録音終了**:
- **停止ボタン**: 任意のタイミングで停止
- **完了ボタン**: 停止ボタンと同じ機能
- **自動停止**: 1分で自動終了

### 3.3 文字起こしモーダル画面

#### 3.3.1 レイアウト構成
```
┌─────────────────────────────────┐
│█████████████████████████████████│
│█                               █│
│█     ⚡ 文字起こし中...        █│ ← ステータス
│█                               █│
│█         ⭕ ⭕ ⭕             █│ ← ローディング
│█                               █│
│█     音声を解析しています       █│ ← サブテキスト
│█    しばらくお待ちください      █│
│█                               █│
│█████████████████████████████████│
└─────────────────────────────────┘
```

#### 3.3.2 デザイン仕様

**ステータステキスト**:
- **テキスト**: "⚡ 文字起こし中..." - 24px, Bold, 白色
- **位置**: 上部中央

**ローディングアニメーション**:
- **パターン**: 3つの円が順次拡大縮小
- **色**: 白色 (#FFFFFF)
- **サイズ**: 各円24px
- **間隔**: 16px
- **速度**: 1.5秒で1周

**サブテキスト**:
- **内容**: "音声を解析しています\nしばらくお待ちください"
- **フォント**: 16px, Regular, 白色
- **位置**: 中央下部

#### 3.3.3 処理状態管理

**段階的メッセージ**:
1. "音声を解析しています..." (0-3秒)
2. "文字起こし中..." (3-7秒)
3. "もう少しです..." (7-10秒)
4. "完了しました!" (10秒後 or 完了時)

### 3.4 通知・フィードバック設計

#### 3.4.1 成功通知（PSトロフィー風）
```
┌─────────────────────────────────┐
│                                 │
│  ┌─────────────────────────┐    │ ← スライドイン
│  │ 🏆 メモを保存しました！  │    │
│  │ ▶️ [0:30] アイデアメモ   │    │
│  └─────────────────────────┘    │
│                                 │
└─────────────────────────────────┘
```

**デザイン仕様**:
- **背景色**: ダークブルー (#1976D2)
- **テキスト**: 白色, 16px, Bold
- **アイコン**: 🏆 + 適切なメモアイコン
- **サイズ**: 幅90%, 高さ80px
- **位置**: 画面上部からスライドイン
- **表示時間**: 3秒間
- **アニメーション**: スライドイン → 一時停止 → フェードアウト

#### 3.4.2 エラー通知
```
┌─────────────────────────────────┐
│  ┌─────────────────────────┐    │
│  │ ❌ エラーが発生しました   │    │
│  │ マイクを許可してください  │    │
│  └─────────────────────────┘    │
└─────────────────────────────────┘
```

**デザイン仕様**:
- **背景色**: 赤色 (#F44336)
- **テキスト**: 白色, 16px, Bold
- **表示時間**: 5秒間（エラー内容により調整）

## 4. コンポーネント設計

### 4.1 Atomic Design適用

#### Atoms（原子）
- **FloatingActionButton**: 🎤録音ボタン
- **IconButton**: 汎用アイコンボタン
- **WaveformVisualizer**: 波形表示
- **AudioPlayer**: 音声再生
- **SuccessToast**: 成功通知
- **LoadingSpinner**: ローディング

#### Molecules（分子）
- **MemoCard**: 個別メモ表示
- **MemoInput**: テキスト入力エリア
- **SearchBox**: 検索入力
- **DateSection**: 日付セクション

#### Organisms（組織）
- **MemoTimeline**: タイムライン全体
- **RecordingModal**: 録音モーダル
- **TranscribingModal**: 文字起こしモーダル
- **AppHeader**: ヘッダー

#### Templates（テンプレート）
- **AppLayout**: アプリ全体レイアウト

### 4.2 共通デザインシステム

#### カラーパレット
```css
:root {
  /* Primary Colors */
  --primary-main: #1976D2;
  --primary-dark: #1565C0;
  --primary-light: #42A5F5;
  
  /* Secondary Colors */
  --secondary-main: #DC004E;
  --secondary-dark: #C51162;
  --secondary-light: #F06292;
  
  /* Neutral Colors */
  --grey-50: #FAFAFA;
  --grey-100: #F5F5F5;
  --grey-200: #EEEEEE;
  --grey-500: #9E9E9E;
  --grey-700: #616161;
  --grey-900: #212121;
  
  /* Semantic Colors */
  --success: #4CAF50;
  --warning: #FF9800;
  --error: #F44336;
  --info: #2196F3;
  
  /* Text Colors */
  --text-primary: #212121;
  --text-secondary: #757575;
  --text-disabled: #BDBDBD;
  
  /* Background Colors */
  --background-default: #FAFAFA;
  --background-paper: #FFFFFF;
}
```

#### タイポグラフィ
```css
/* Headings */
.text-h1 { font-size: 32px; font-weight: 700; line-height: 1.2; }
.text-h2 { font-size: 24px; font-weight: 600; line-height: 1.3; }
.text-h3 { font-size: 20px; font-weight: 600; line-height: 1.4; }
.text-h4 { font-size: 18px; font-weight: 600; line-height: 1.4; }

/* Body Text */
.text-body1 { font-size: 16px; font-weight: 400; line-height: 1.5; }
.text-body2 { font-size: 14px; font-weight: 400; line-height: 1.4; }

/* Labels & Captions */
.text-caption { font-size: 12px; font-weight: 400; line-height: 1.3; }
.text-label { font-size: 14px; font-weight: 500; line-height: 1.4; }
```

#### スペーシング
```css
/* Spacing Scale (4px base) */
.space-1 { margin/padding: 4px; }
.space-2 { margin/padding: 8px; }
.space-3 { margin/padding: 12px; }
.space-4 { margin/padding: 16px; }
.space-5 { margin/padding: 20px; }
.space-6 { margin/padding: 24px; }
.space-8 { margin/padding: 32px; }
.space-10 { margin/padding: 40px; }
```

## 5. レスポンシブデザイン

### 5.1 ブレークポイント
```css
/* Mobile First Approach */
.mobile { max-width: 599px; }     /* ~ 599px */
.tablet { min-width: 600px; }     /* 600px ~ 1023px */
.desktop { min-width: 1024px; }   /* 1024px ~ */
```

### 5.2 デバイス別調整

#### モバイル（〜599px）
- **タップターゲット**: 最小44px × 44px
- **入力エリア**: フルワイズ
- **フォントサイズ**: 最小16px（ズーム防止）
- **マージン**: 最小8px

#### タブレット（600px〜1023px）
- **レイアウト**: 2カラム検討
- **タップターゲット**: 40px × 40px
- **サイドバー**: 検索・フィルター機能

#### デスクトップ（1024px〜）
- **最大幅**: 800px（中央寄せ）
- **ホバー効果**: マウスオーバー対応
- **キーボード操作**: ショートカット対応

### 5.3 PWA対応

#### アプリライク体験
```json
{
  "name": "VoiceMemo",
  "short_name": "VoiceMemo",
  "theme_color": "#1976D2",
  "background_color": "#FFFFFF",
  "display": "standalone",
  "start_url": "/",
  "icons": [
    {
      "src": "/icon-192.png",
      "sizes": "192x192",
      "type": "image/png"
    }
  ]
}
```

#### オフライン対応
- **Service Worker**: キャッシュ戦略
- **オフライン画面**: 接続待ち表示
- **同期**: 接続復旧時の自動同期

## 6. アクセシビリティ

### 6.1 WCAG 2.1 準拠

#### レベルAA対応
- **色覚**: コントラスト比4.5:1以上
- **キーボード**: 全機能キーボード操作可能
- **スクリーンリーダー**: ARIA属性適切設定
- **フォーカス**: 明確なフォーカス表示

#### 音声機能配慮
- **字幕**: 音声再生時の視覚的フィードバック
- **代替操作**: 音声以外の入力方法
- **音量調整**: 再生音量の調整機能

### 6.2 ユーザビリティ配慮

#### 高齢者・障害者対応
- **大きなタップターゲット**: 最小44px
- **明確なラベル**: 機能説明の充実
- **エラー防止**: 確認ダイアログの適切な配置
- **簡単な操作**: 複雑な操作の排除

## 7. パフォーマンス最適化

### 7.1 読み込み最適化

#### Critical Rendering Path
- **CSS**: インライン化（初期表示分）
- **JavaScript**: 分割読み込み
- **フォント**: preload対応
- **画像**: WebP形式、lazy loading

#### コンポーネント最適化
- **仮想スクロール**: 大量データ対応
- **メモ化**: React.memo, useMemo活用
- **コード分割**: ページ単位での分割

### 7.2 UX最適化

#### ローディング状態
- **スケルトンスクリーン**: 読み込み中の表示
- **プログレッシブ表示**: 段階的コンテンツ表示
- **インタラクティブ性**: 早期のユーザー操作受付

#### アニメーション
- **60fps**: スムーズなアニメーション
- **GPU加速**: transform, opacity使用
- **reduced-motion**: アニメーション無効化対応

## 8. 実装ガイドライン

### 8.1 コンポーネント開発

#### フォルダ構成
```
components/
├── common/           # 汎用コンポーネント
│   ├── buttons/
│   ├── modals/
│   ├── feedback/
│   └── audio/
└── pages/           # 画面専用コンポーネント
    ├── memo/
    └── auth/
```

#### Props設計
```typescript
// 明確な型定義
interface MemoCardProps {
  memo: Memo;
  onPlay: (audioUrl: string) => void;
  onDelete: (memoId: string) => void;
  isPlaying?: boolean;
}

// デフォルト値設定
const MemoCard: React.FC<MemoCardProps> = ({
  memo,
  onPlay,
  onDelete,
  isPlaying = false
}) => { /* ... */ };
```

### 8.2 スタイリング方針

#### CSS-in-JS + Utility
```typescript
// Material-UI + Tailwind の組み合わせ
const StyledCard = styled(Card)`
  ${({ theme }) => css`
    box-shadow: ${theme.shadows[1]};
    border-radius: ${theme.shape.borderRadius}px;
  `}
`;

// Tailwind Utility Classes
<div className="p-4 mb-2 bg-white rounded-lg shadow-sm">
```

### 8.3 テスト方針

#### テスト種別
- **Unit Test**: コンポーネント単体
- **Integration Test**: コンポーネント間連携
- **E2E Test**: ユーザーシナリオ
- **Visual Regression**: デザイン regression

#### テストツール
- **Jest**: Unit/Integration Test
- **React Testing Library**: コンポーネントテスト
- **Playwright**: E2E Test
- **Storybook**: Visual Test

---

**文書作成日**: 2025年8月3日  
**最終更新**: UI/UX設計完了  
**次ステップ**: 実装開始